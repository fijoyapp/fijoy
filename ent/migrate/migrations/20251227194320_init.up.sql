-- create "currencies" table
CREATE TABLE "currencies" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 4294967296), "code" character varying NOT NULL, PRIMARY KEY ("id"));
-- create index "currencies_code_key" to table: "currencies"
CREATE UNIQUE INDEX "currencies_code_key" ON "currencies" ("code");
-- create "households" table
CREATE TABLE "households" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 8589934592), "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "name" character varying NOT NULL, "locale" character varying NOT NULL, "currency_households" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "households_currencies_households" FOREIGN KEY ("currency_households") REFERENCES "currencies" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION);
-- create "accounts" table
CREATE TABLE "accounts" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "name" character varying NOT NULL, "type" character varying NOT NULL, "currency_accounts" bigint NOT NULL, "household_accounts" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "accounts_currencies_accounts" FOREIGN KEY ("currency_accounts") REFERENCES "currencies" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, CONSTRAINT "accounts_households_accounts" FOREIGN KEY ("household_accounts") REFERENCES "households" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION);
-- create "investments" table
CREATE TABLE "investments" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 30064771072), "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "name" character varying NOT NULL, "type" character varying NOT NULL, "symbol" character varying NOT NULL, "account_investments" bigint NOT NULL, "currency_investments" bigint NOT NULL, "household_investments" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "investments_accounts_investments" FOREIGN KEY ("account_investments") REFERENCES "accounts" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, CONSTRAINT "investments_currencies_investments" FOREIGN KEY ("currency_investments") REFERENCES "currencies" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, CONSTRAINT "investments_households_investments" FOREIGN KEY ("household_investments") REFERENCES "households" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION);
-- create "lots" table
CREATE TABLE "lots" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 34359738368), "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "datetime" timestamptz NOT NULL, "amount" numeric(36,18) NOT NULL, "price" numeric(36,18) NOT NULL, "investment_lots" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "lots_investments_lots" FOREIGN KEY ("investment_lots") REFERENCES "investments" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION);
-- create "transactions" table
CREATE TABLE "transactions" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 12884901888), "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "description" character varying NULL, "datetime" timestamptz NOT NULL, "household_transactions" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "transactions_households_transactions" FOREIGN KEY ("household_transactions") REFERENCES "households" ("id") ON UPDATE NO ACTION ON DELETE SET NULL);
-- create index "transaction_datetime" to table: "transactions"
CREATE INDEX "transaction_datetime" ON "transactions" ("datetime");
-- create "transaction_entries" table
CREATE TABLE "transaction_entries" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 17179869184), "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "amount" numeric(36,18) NOT NULL, "account_transaction_entries" bigint NOT NULL, "currency_transaction_entries" bigint NOT NULL, "transaction_transaction_entries" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "transaction_entries_accounts_transaction_entries" FOREIGN KEY ("account_transaction_entries") REFERENCES "accounts" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, CONSTRAINT "transaction_entries_currencies_transaction_entries" FOREIGN KEY ("currency_transaction_entries") REFERENCES "currencies" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, CONSTRAINT "transaction_entries_transactions_transaction_entries" FOREIGN KEY ("transaction_transaction_entries") REFERENCES "transactions" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION);
-- create "users" table
CREATE TABLE "users" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 21474836480), "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "email" character varying NOT NULL, PRIMARY KEY ("id"));
-- create "user_households" table
CREATE TABLE "user_households" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 25769803776), "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "role" character varying NOT NULL, "user_id" bigint NOT NULL, "household_id" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "user_households_households_household" FOREIGN KEY ("household_id") REFERENCES "households" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION, CONSTRAINT "user_households_users_user" FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE NO ACTION);
-- create index "userhousehold_user_id_household_id" to table: "user_households"
CREATE UNIQUE INDEX "userhousehold_user_id_household_id" ON "user_households" ("user_id", "household_id");
