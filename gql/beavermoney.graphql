extend type Account {
  balanceInHouseholdCurrency: String!
  valueInHouseholdCurrency: String!
}

type StockQuoteResult {
  symbol: String!
  name: String!
  exchange: String!
  currency: String!
  currentPrice: String!
}

type CryptoQuoteResult {
  symbol: String!
  name: String!
  exchange: String!
  currency: String!
  currentPrice: String!
}

extend type Investment {
  valueInHouseholdCurrency: String!
}

extend type Query {
  self: User!
  fxRate(from: String!, to: String!, datetime: Time!): String!
  stockQuote(symbol: String!): StockQuoteResult
  cryptoQuote(symbol: String!): CryptoQuoteResult

  financialReport(period: TimePeriodInput!): FinancialReport!
  netWorthOverTime(period: TimePeriodInput!): [NetWorthDataPoint!]!
}

input CreateInvestmentInputCustom {
  input: CreateInvestmentInput!
  costBasis: String!
}

type Mutation {
  createHousehold(input: CreateHouseholdInput!): Household!

  createAccount(input: CreateAccountInput!): AccountEdge!
  createInvestment(input: CreateInvestmentInputCustom!): InvestmentEdge!
  createTransactionCategory(
    input: CreateTransactionCategoryInput!
  ): TransactionCategoryEdge!
  createRecurringSubscription(
    input: CreateRecurringSubscriptionInput!
  ): RecurringSubscriptionEdge!

  # Transaction mutations
  createExpense(input: CreateExpenseInputCustom!): TransactionEdge!
  createIncome(input: CreateIncomeInputCustom!): TransactionEdge!
  createTransfer(input: CreateTransferInputCustom!): TransactionEdge!
  buyInvestment(input: BuyInvestmentInputCustom!): TransactionEdge!
  sellInvestment(input: SellInvestmentInputCustom!): TransactionEdge!
  moveInvestment(input: MoveInvestmentInputCustom!): TransactionEdge!

  refresh: Boolean!
}

type FinancialReport {
  incomeBreakdown: CategoryTypeAggregate!
  expensesBreakdown: CategoryTypeAggregate!

  transactionCount: Int!

  startDate: Time!
  endDate: Time!
}

type CategoryTypeAggregate {
  categoryType: TransactionCategoryType!
  total: String!
  transactionCount: Int!
  categories: [CategoryAggregate!]!
}

type CategoryAggregate {
  category: TransactionCategory!
  total: String!
  transactionCount: Int!
}

input TimePeriodInput {
  startDate: Time!
  endDate: Time!
}

type NetWorthBreakdown {
  liquidity: String!
  investment: String!
  property: String!
  receivable: String!
  liability: String!
}

type NetWorthDataPoint {
  date: Time!
  netWorth: String!
  breakdown: NetWorthBreakdown!
}

# Expense: Money out from account
input CreateExpenseInputCustom {
  transaction: CreateTransactionInput!
  transactionEntry: CreateTransactionEntryInput!
  fees: [CreateTransactionEntryInput!]! = []
}

# Income: Money in to account
input CreateIncomeInputCustom {
  transaction: CreateTransactionInput!
  transactionEntry: CreateTransactionEntryInput!
  fees: [CreateTransactionEntryInput!]! = []
}

# Transfer: Between two accounts
input CreateTransferInputCustom {
  transaction: CreateTransactionInput!
  # Should contain two entries: from and to
  transactionEntries: [CreateTransactionEntryInput!]!
  fees: [CreateTransactionEntryInput!]! = []
}

# Buy Investment: Cash -> Shares
input BuyInvestmentInputCustom {
  transaction: CreateTransactionInput!
  transactionEntry: CreateTransactionEntryInput!
  investmentLot: CreateInvestmentLotInput!
  fees: [CreateTransactionEntryInput!]! = []
}

# Sell Investment: Shares -> Cash
input SellInvestmentInputCustom {
  transaction: CreateTransactionInput!
  transactionEntry: CreateTransactionEntryInput!
  investmentLot: CreateInvestmentLotInput!
  fees: [CreateTransactionEntryInput!]! = []
}

# 6. Move Investment: Shares between investment accounts
input MoveInvestmentInputCustom {
  transaction: CreateTransactionInput!
  investmentLots: [CreateInvestmentLotInput!]!
  fees: [CreateTransactionEntryInput!]! = []
}
